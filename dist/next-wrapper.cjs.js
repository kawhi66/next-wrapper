"use strict";function EventCenter(){this._state=0,this._idx=0,this._queue=[]}function noop(t){t()}Object.defineProperty(exports,"__esModule",{value:!0}),EventCenter.prototype.init=function(){this._state=0,this._idx=0,"function"==typeof this._queue[this._idx]&&(this._state=1,this._queue[this._idx](this.next.bind(this)))},EventCenter.prototype.addEvents=function(t){const e=[].slice.call(arguments),n={}.toString.call(t).toLowerCase().split(" ")[1].slice(0,-1);let i=[];e.length>1?e.forEach(t=>{"function"==typeof t?i.push(t):i.push(noop)}):"function"===n?i.push(t):"array"===n&&t.forEach(t=>{"function"==typeof t?i.push(t):i.push(noop)}),this._queue=this._queue.concat(i)},EventCenter.prototype.next=function(){if(this._queue.length<=this._idx+1)return!1;"function"==typeof this._queue[++this._idx]&&this._queue[this._idx](this.next.bind(this))},EventCenter.prototype.getSnapShot=function(){return{running:!!this._state}};const uuid=require("uuid/v1"),ecmap={default:new EventCenter};function nextWrapper(t,e){const n=[].slice.call(arguments),i=n[n.length-1];let o="default",s=[];"string"==typeof i?2===n.length?(o=e,s.push(t)):(o=i,s=n.slice(0,-1)):s=n,ecmap.hasOwnProperty(o)||(ecmap[o]=new EventCenter),s.forEach(t=>{ecmap[o].addEvents(t)}),ecmap[o].getSnapShot().running||ecmap[o].init()}function nextGenerator(){const t=new EventCenter,e=uuid();return ecmap[e]=t,e}exports.nextGenerator=nextGenerator,exports.nextWrapper=nextWrapper;
